<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="Content/bootstrap.css" rel="stylesheet">
    <link href="Content/css/style.css" rel="stylesheet" />
</head>
    <body>
        <div class="container-fluid">
            <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Insert your information!</h4>
                        </div>
                        <div class="modal-body">
                            <h4>Summoner Name:</h4>
                            <input type="text" />
                            <br /><br />
                            <h4>Select boosting methode</h4>
                            <span>
                                <input type="checkbox" />SoloQ
                                <input id="DuoQCheckbox" type="checkbox" />DuoQ
                            </span>
                            <br />(We add +25% to the final price for DuoQ)
                            <br /><br />
                            <h4>Select your region</h4>
                            <select>
                                <option></option>
                                <option>EUW (Europe West)</option>
                                <option>EUNE (Europe Nordic & East)</option>
                                <option>NA (North America)</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <div>
                                <a>Buy now</a>
                                total
                                <span id="priceCheckout"></span>
                                $
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 5%;" class="row" id="mydiv">
                <h2 style="text-align:center; margin-bottom: 2%;">Rank boost</h2>
                <div class="col-sm-3 form-group">
                    <select id="division-from" class="form-control price-modifier">
                        <option value="1" selected>Bronze</option>
                        <option value="2">Silver</option>
                        <option value="3">Gold</option>
                        <option value="4">Platinum</option>
                        <option value="5">Diamond</option>
                    </select>
                </div>

                <div class="col-sm-3 form-group">
                    <select id="tier-from" class="form-control price-modifier">
                        <option value="5">5</option>
                        <option value="4">4</option>
                        <option value="3">3</option>
                        <option value="2">2</option>
                        <option value="1">1</option>
                    </select>
                </div>

                <div class="col-sm-3 form-group">
                    <select id="division-to" class="form-control price-modifier">
                        <option value="1" selected>Bronze</option>
                        <option value="2">Silver</option>
                        <option value="3">Gold</option>
                        <option value="4">Platinum</option>
                        <option value="5">Diamond</option>
                        <option value="6">Master Tier</option>
                    </select>
                </div>

                <div class="col-sm-3 form-group">
                    <select id="tier-to" class="form-control price-modifier">
                        <option value="5">5</option>
                        <option value="4">4</option>
                        <option value="3">3</option>
                        <option value="2">2</option>
                        <option value="1">1</option>
                    </select>
                    <select style="display:none;" id="tier-none" class="form-control price-modifier" disabled>
                        <option></option>
                    </select>
                </div>
            </div>

            <div style="text-align:center;" class="row">
                <div class="col-sm-4">
                    <h3>Current rank</h3>
                    <img id="Current" src="http://vignette4.wikia.nocookie.net/leagueoflegends/images/b/b4/BronzeBadgeSeason2.png/revision/latest?cb=20130928162132" />
                </div>

                <div style="margin-top: 8%" class="col-sm-4">
                    <h4 style="font-weight: bold">Price:</h4>
                    <div id="price"></div>
                </div>

                <div class="col-sm-4">
                    <h3>Wanted rank</h3>
                    <img id="Wanted" src="http://vignette4.wikia.nocookie.net/leagueoflegends/images/b/b4/BronzeBadgeSeason2.png/revision/latest?cb=20130928162132" />
                </div>
            </div>

            <hr />

            <div class="row">
                <h2 style="text-align:center; margin-bottom: 2%;">League wins</h2>
                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Bronze wins</h4>
                    <img src="http://vignette4.wikia.nocookie.net/leagueoflegends/images/b/b4/BronzeBadgeSeason2.png/revision/latest?cb=20130928162132" />
                    <br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 2.5$</span>
                </div>

                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Silver wins</h4>
                    <img src="http://vignette2.wikia.nocookie.net/leagueoflegends/images/3/3f/SilverBadgeSeason2.png/revision/latest?cb=20130928162033" />
                    <br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 7$</span>
                </div>

                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Gold wins</h4>
                    <img src="http://vignette1.wikia.nocookie.net/leagueoflegends/images/7/77/GoldBadgeSeason2.png/revision/latest?cb=20130928162204" />
                    <br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 12.5$</span>
                </div>

                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Platinum wins</h4>
                    <img src="http://vignette2.wikia.nocookie.net/leagueoflegends/images/5/5f/PlatinumBadgeSeason2.png/revision/latest?cb=20130928162240" />
                    <br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 20$</span>
                </div>

                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Diamond wins</h4>
                    <img src="http://vignette2.wikia.nocookie.net/leagueoflegends/images/0/03/DiamondBadge.png/revision/latest?cb=20130928162320" />
                    <br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 55$</span>
                </div>

                <div class="col-sm-3" style="text-align:center; margin-top: 2%;">
                    <h4>Master Tier wins</h4>
                    <img src="http://vignette4.wikia.nocookie.net/leagueoflegends/images/d/d2/MasterBadge.png/revision/latest?cb=20150418014845" />
                    <br /><br />
                    <p>Select number(s) of win(s)</p>
                    <select id="wins">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                        <option>10</option>
                    </select>
                    <span>Win(s). Each win is 105$</span>
                </div>
            </div>
        </div>


    <script src="scripts/jquery-1.9.1.js"></script>
    <script src="scripts/bootstrap.js"></script>
        <script>
            var pictureList = [
            "http://vignette4.wikia.nocookie.net/leagueoflegends/images/b/b4/BronzeBadgeSeason2.png/revision/latest?cb=20130928162132",
            "http://vignette4.wikia.nocookie.net/leagueoflegends/images/b/b4/BronzeBadgeSeason2.png/revision/latest?cb=20130928162132",
            "http://vignette2.wikia.nocookie.net/leagueoflegends/images/3/3f/SilverBadgeSeason2.png/revision/latest?cb=20130928162033",
            "http://vignette1.wikia.nocookie.net/leagueoflegends/images/7/77/GoldBadgeSeason2.png/revision/latest?cb=20130928162204",
            "http://vignette2.wikia.nocookie.net/leagueoflegends/images/5/5f/PlatinumBadgeSeason2.png/revision/latest?cb=20130928162240",
            "http://vignette2.wikia.nocookie.net/leagueoflegends/images/0/03/DiamondBadge.png/revision/latest?cb=20130928162320",
            "http://vignette4.wikia.nocookie.net/leagueoflegends/images/d/d2/MasterBadge.png/revision/latest?cb=20150418014845", ];

            $('#division-from').change(function () {
                var val = parseInt($('#division-from').val());
                $('#Current').attr("src", pictureList[val]);
            });

            $('#division-to').change(function () {
                var val = parseInt($('#division-to').val());
                $('#Wanted').attr("src", pictureList[val]);
            });


            var divisions = [{
                "name": "1",
                "cost": 8,
                "tiers": 5
            }, {
                "name": "2",
                "cost": 22,
                "tiers": 5
            }, {
                "name": "3",
                "cost": 42,
                "tiers": 5
            }, {
                "name": "4",
                "cost": 60,
                "tiers": 5
            }, {
                "name": "5",
                "cost": 164,
                "tiers": 5
            }, {
                "name": "6",
                "cost": 298,
                "tiers": 5
            }];
            var getDivision = function (name) {
                for (var key in divisions) {
                    var division = divisions[key];
                    if (division.name == name) {
                        return division;
                    }
                }
                return null;
            };
            var getDivisionsBetween = function (dfn, dtn) {
                // Holds the array of divisions
                var ds = [];
                for (var i = 0, skip = true; i < divisions.length; i++) {
                    var d = divisions[i];

                    // Skip every division until we find the start division
                    if (d.name == dfn)
                        skip = false;

                    if (!skip)
                        ds.push(d);

                    // Search ends when the end of the array is reached, or the end division is found.
                    if (d.name == dtn)
                        break;
                }
                return ds;
            };
            var validatePriceModifiers = function (dfn, tf, dtn, tt) {
                var errors = [];
                var ds = getDivisionsBetween(dfn, dtn);
                if (ds.length === 0) {
                    errors.push({
                        code: 0,
                        message: 'Your start division is too high for your wanted division. <br /> Please chose a another wantede division'
                    });
                } else if (ds.length === 1 && tf < tt) {
                    errors.push({
                        code: 1,
                        message: 'Start tier must be lower than or equal to end tier, when using the same start end end division.'
                    });
                }
                return errors;
            };
            var getPrice = function (dfn, tf, dtn, tt) {
                var ds = getDivisionsBetween(dfn, dtn);
                if (ds.length === 0) {
                    throw 'Invalid arguments (dfn: ' + dfn + ', dtn: ' + dtn + ')';
                } else if (ds.length === 1) {
                    if (tf < tt)
                        throw 'Invalid arguments (tt: ' + tt + ' < tf: ' + tf + ')';
                    return getPriceForTierInterval(ds[0], tf, tt);
                } else {
                    // ds.length > 1
                    var price = 0;
                    var lastIndex = ds.length - 1;
                    for (var i = 0; i < ds.length; i++) {
                        var d = ds[i];
                        var dtf = (i === 0) ? tf : d.tiers + 1;
                        var dtt = (i === lastIndex) ? tt : 1;
                        price += getPriceForTierInterval(d, dtf, dtt);
                    }
                    return price;
                }
            };
            var getPriceForTierInterval = function (d, tf, tt) {
                var price = 0;
                for (var i = tf; i > tt; i--) {
                    price += d.cost;
                }
                return price;
            };

            // Start the show
            $(function () {
                // Store references to frequently used elements - for speed.
                var $divFrom = $('#division-from');
                var $divTo = $('#division-to');
                var $tierFrom = $('#tier-from');
                var $tierTo = $('#tier-to');

                var $price = $('#price');
                var $priceCheckout = $('#priceCheckout');

                // Select price calculation callback
                $(document).on('change', '.price-modifier', function () {
                    var divFrom = $divFrom.val();
                    var divTo = $divTo.val();
                    var tierFrom = $tierFrom.val();
                    var tierTo = $tierTo.val();

                    // Error handling
                    var errors = validatePriceModifiers(divFrom, tierFrom, divTo, tierTo);
                    if (errors.length === 0) {
                        // No errors
                        var price = getPrice(divFrom, tierFrom, divTo, tierTo);
                        $price.html(price + ' $' + '<br /> <br />' + '<button type="submit" data-toggle="modal" data-target="#myModal" class="btn btn-info">Buy</button>');
                        $priceCheckout.html(price);
                    } else {
                        // Display errors
                        $price.empty();
                        for (var i = 0; i < errors.length; i++) {
                            $price.append($('<p>').html(errors[i].message));
                        }
                    }
                });
            });

            $("#division-to").change(function () {
                if ($(this).val() == 6) {
                    $("#tier-to").hide();
                    $("#tier-none").show();
                }
                else {
                    $("#tier-none").hide();
                    $("#tier-to").show();
                }
            });


            $('#DuoQCheckbox').change(function () {

                var $priceCheckout = $('#priceCheckout');
                var currentPrice = parseInt($priceCheckout.html()).toFixed(2);

                if ($("#DuoQCheckbox").prop('checked') == true) {
                    $priceCheckout.html(parseInt(currentPrice) + parseInt(currentPrice / 100 * 25));
                }
                if ($("#DuoQCheckbox").prop('checked') == false) {
                    $priceCheckout.html((parseInt(currentPrice) - parseInt(currentPrice / 100 * 20)));
                }

                //if ($("#DuoQCheckbox").prop('checked') == true) {
                //    $priceCheckout.html(parseInt(currentPrice) + parseInt(currentPrice / 100 * 40));
                //}
                //if ($("#DuoQCheckbox").prop('checked') == false) {
                //    $priceCheckout.html((parseInt(currentPrice) - parseInt(currentPrice / 100 * 28.58)));
                //}

            });
        </script>
    </body>
</html>
